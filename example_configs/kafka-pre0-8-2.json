{
 "lowercaseOutputName": true,
 "rules" : [
  {"pattern" : "\"kafka.consumer\"<type=\"(.+)\", name=\"ReplicaFetcherThread-(\d+)-\d+-(\w+)\"><>(Count)",
    "name": "kafka_consumer_$1_$3_$4",
    "labels": {
      "thread": "$2",
    },
  },
  {"pattern" : "\"kafka.consumer\"<type=\"(.+)\", name=\"ReplicaFetcherThread-(\d+)-\d+-host_(.+?)-port_(\d+)-(\w+)\"><>(Count|Value)",
    "name": "kafka_consumer_$1_$5_$6",
    "labels": {
      "thread": "$2",
      "hostport": "$3:$4",
    },
  },
  {"pattern" : "\"kafka.consumer\"<type=\"(.+)\", name=\"ReplicaFetcherThread-(\d+)-\d+-host_(.+?)-port_(\d+)-(.+)-(\d+)-(\w+)\"><>(Count|Value)",
    "name": "kafka_consumer_$1_$7_$8",
    "labels": {
      "thread": "$2",
      "hostport": "$3:$4",
      "topic": "$5",
      "partition": "$6",
    },
  },
  {"pattern" : "\"kafka.server\"<type=\"(FetcherStats)\", name=\"ReplicaFetcherThread-(\d+)-\d+-host_(.+?)-port_(\d+)-(\w+)PerSec\"><>Count",
    "name": "kafka_server_$1_$5_total",
    "labels": {
      "thread": "$2",
      "hostport": "$3:$4",
    },
  },
  {"pattern" : "\"kafka.server\"<type=\"(FetcherLag.+)\", name=\"ReplicaFetcherThread-(\d+)-\d+-host_(.+?)-port_(\d+)-(.+)-(\d+)-(\w+)\"><>(Count|Value)",
    "name": "kafka_server_$1_$7_$8",
    "labels": {
      "thread": "$2",
      "hostport": "$3:$4",
      "topic": "$5",
      "partition": "$6",
    },
  },

  {"pattern": "\"kafka.cluster\"<type=\"(.+)\", name=\"(.+)-(\d+)-(\w+)\"><>Value",
    "name": "kafka_cluster_$1_$4",
    "labels": {
      "topic": "$2",
      "partition": "$3",
    },
  },
  {"pattern": "\"kafka.log\"<type=\"Log\", name=\"(.+)-(\d+)-(\w+)\"><>Value",
    "name": "kafka_log_$3",
    "labels": {
      "topic": "$1",
      "partition": "$2",
    },
  },
  {"pattern": "\"kafka.server\"<type=\"(.+)\", name=\"(.+)-(\w+)PerSec\"><>Count",
    "name": "kafka_server_$1_$3_total",
    "type": "COUNTER",
    "labels": {
      "topic": "$2",
    },
  },
  {"pattern": "\"kafka.server\"<type=\"(.+)\", name=\"(.+)-(\w+)\"><>(Count|Value)",
    "name": "kafka_server_$1_$3_$4",
    "labels": {
      "topic": "$2",
    },
  },

  {"pattern": "\"kafka.network\"<type=\"(.+)\", name=\"Processor-(\d+)-(.+)\"><>Value",
    "name": "kafka_network_$1_$3",
    "labels": {
      "processor": "$2",
    },
  },
  {"pattern": "\"kafka.(\w+)\"<type=\"(.+)\", name=\"(.+)PerSec\"><>Count",
    "name": "kafka_$1_$2_$3_total",
    "type": "COUNTER",
  },
  {"pattern": "\"kafka.(\w+)\"<type=\"(.+)\", name=\"(.+)\"><>(Count|Value)",
    "name": "kafka_$1_$2_$3_$4",
  },
 ]
}
